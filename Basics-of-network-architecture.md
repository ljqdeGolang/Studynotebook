## 网络架构基础

##### c/c++跨平台原理

.c/.cpp，编译成不同平台的可执行文件(.pe/.elef/.mach-o)。系统可以执行这些文件。

##### java跨平台原理

.java，编译成.class文件（字节码文件，操作系统不能执行）。要在各个系统装上jvm（java虚拟机）。实现一次编译，到处运行。

##### 客户端vs服务器

服务器软件监听服务器端口

部署java项目，在同一服务器软件可部署不同项目，响应不同客户端的响应。

服务器软件：Tomcat （java）

##### 网络基础硬件

直连：交叉线

同轴电缆：半双工。 冲突域

集线器（hub）：半双工。冲突域

网桥：自学得到一侧的MAC地址，只有两口。隔绝冲突域

交换机：相当于多接口的网桥，全双工

以上连的设备都必须在同一个网段、都处于同一个广播域19

路由器：可以在不同网段之间转发数据，隔绝广播域 。

- 有多个网口表示多个网关
- 不同网关对应不同的MAC地址，ip地址与不同局域网通网段。

##### MAC地址

6字节，前三字节组织唯一标识符、后三字节网络接口标识符。

查询命令：ipconfig /all

广播地址：FF-FF-FF-FF-FF-FF 

ARP广播（同网段）获取MAC地址，记录MAC地址：arp缓存

arp命令：arp -a 、arp -a 主机地址、arp -a 主机地址 MAC地址。

##### ip地址

ipv4：4个字节。划分为网络标识ID和主机ID

根据网络标识ID，有A、B、C、D、E五种网络类型。

子网掩码：用位与运算，能确定网络ID类型。

网段：192.168.1.0/24 （/24是子网掩码CIDR表示法）

广播：192.168.1.255/24

子网划分：

- 等长划分

  子网掩码向右挪一位，子网划分为原来的1/2。

  192.168.1.0/25、192.168.1.128/25

- 变长划分

  1/2的倍数进行划分

超网：合并多个小网段

##### 路由

- 静态路由 

特定ip路由，子网掩码设为255.255.255.255

默认路由，网络设为0.0.0.0，子网掩码设为0.0.0.0

- 动态路由

  RIP\OSPF路由协议

##### 数据包的传输过程

 源ip和目标ip一直没变，源MAC和目标MAChi发生变化

##### 网络、互联网、因特网

ISP：因特网(Internet)服务提供商

服务器机房：不同供应商的机房

局域网（LAN）：范围几百米到十几公里的计算机网络

城域网（MAN）：可以覆盖一个城市

广域网（WAN）：覆盖一个国家，通常租用ISP线路

##### 常用接口

FastEthernet：快速以太网接口，一般用于局域网。

GibiatEthernet:千兆级别

Serial：串行接口

##### 上网方式：

- 电话线入户

ADSL拨号上网，非对称数字用户线路，提供上、下行不对称的传输宽带。

猫（Modem）：调制捷解调器，进行数字信号和模拟信号的转换。

- 光纤入户

光猫（PON），光调制解调器，进行数字信号和光信号的转换。

- 网线入户

家里不用准备光猫。

##### 公网IP、私网IP

- 公网IP：因特网上的路由器只有到达公网的路由表，没有到达私网的路由表。

  有因特网信息中心统一分配管理

- 私网IP：主要用于局域网。保留的私网网段

  A类：10.0.0.0/8

  B类：172.16.0.0/16—172.31.0.0/16

  C类：192.168.0.0/24—192.168.255.0/24

##### NAT

私网IP访问因特网需要进行NAT转换为公网IP

静态转换：手动配置NAT映射表

动态转换：定义外部地址池，动态随机转换

PAT：多对一转换，端口多路复用方式，通过端口号标识不同的数据流。

#### 网络分层

##### 网络层

- 首部

  版本号（4位），首部长度（4位），区分服务（8位），总长度（16位，最大值65535）

  由于帧太小，需要将ip数据包分成片，每个片都有自己的网络层首部
